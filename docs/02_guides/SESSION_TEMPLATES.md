# 11 - 对话模板集合

> ⚠️ **本文件是对话迁移的核心！**
> 
> 包含所有用于新建对话、交接对话的模板

---

## 📋 目录

1. [新对话启动模板](#1-新对话启动模板)
2. [会话交接请求模板](#2-会话交接请求模板)
3. [会话交接摘要格式](#3-会话交接摘要格式)
4. [特定任务模板](#4-特定任务模板)
5. [Debug 专用模板](#5-debug-专用模板)
6. [设计评审模板](#6-设计评审模板)

---

## 1. 新对话启动模板

### 1.1 标准启动模板 (每次新对话使用)

```markdown
# Titan-TPU V2 项目继续

## 📋 项目简介
- **项目名**: Titan-TPU V2 - 基于 ECC 容错与稀疏化架构的高可靠 AXI-TPU 协处理器
- **基础代码**: tiny-tpu-v2 (https://github.com/tiny-tpu-v2/tiny-tpu)
- **魔改目标**: ECC SECDED + Sparse 优化 + AXI 总线
- **最终目标**: 成都实习 + 上海秋招

## 🔧 环境信息
- **系统**: CentOS 7 (VMware 虚拟机)
- **EDA**: VCS T-2022.06 + Verdi + DC
- **项目路径**: `/home/jjt/Titan_TPU_V2`
- **Claude API**: www.zz166.cn (已配置 claude_debug.py)

## 📊 当前进度

[复制最新的进度条到这里，格式如下]

═══════════════════════════════════════════════════════════════════
📊 Titan-TPU V2 进度 [Phase X - 第 Y 周]
═══════════════════════════════════════════════════════════════════

Phase 1 - 核心理解        [████░░░░░░] 40%
  ├─ PE 模块              ✅ 完成
  ├─ Systolic Array       🔄 进行中
  ├─ VPU                  ⬜ 待做
  └─ Control Unit         ⬜ 待做

Phase 2 - 魔改特性        [░░░░░░░░░░] 0%
  ├─ ECC SECDED           ⬜ 待做
  ├─ Sparse 优化          ⬜ 待做
  └─ AXI 总线             ⬜ 待做

Phase 3 - 验证环境        [░░░░░░░░░░] 0%
Phase 4 - 综合分析        [░░░░░░░░░░] 0%

═══════════════════════════════════════════════════════════════════

## ✅ 已完成
- [列出已完成的任务]

## 🔄 进行中
- [列出当前正在做的任务]

## ⬜ 待做
- [列出即将要做的任务]

## 🐛 当前问题 (如果有)
```
[粘贴错误信息]
```

## 🎯 本次目标
[明确写出这次对话要完成什么]

---

请按照 Master Instructions 的规则回复。
```

### 1.2 从交接摘要恢复的模板

```markdown
# Titan-TPU V2 项目继续 (从交接恢复)

## 📋 上次会话交接摘要

[粘贴上次会话生成的交接摘要]

---

## 🎯 本次目标

[写出这次要做什么]

---

请按照 Master Instructions 的规则，从交接摘要恢复上下文，继续工作。
```

---

## 2. 会话交接请求模板

### 2.1 对话快满时使用

当你感觉对话快要结束时（通常 15-20 轮后），发送以下内容：

```markdown
## 📤 请求会话交接

对话框快满了，请生成会话交接摘要，包含：

1. **当前进度条** (最新状态)
2. **本次完成的工作**
   - 完成了哪些模块/功能
   - 修复了哪些 Bug
   - 生成了哪些文件
3. **关键代码/文件变更**
   - 列出修改的文件
   - 关键代码片段 (如果有)
4. **遗留问题**
   - 未解决的 Bug
   - 未完成的任务
5. **下一步计划**
   - 接下来应该做什么
   - 优先级建议
6. **学到的知识点**
   - 本次学到了什么
   - 面试可能问到的点

格式要求：生成的摘要可以直接粘贴到新对话中使用。
```

---

## 3. 会话交接摘要格式

Claude 应该生成如下格式的交接摘要：

```markdown
# 🔄 Titan-TPU V2 会话交接摘要

**生成时间**: YYYY-MM-DD HH:MM
**会话周期**: Phase X - Week Y

---

## 📊 当前进度条

═══════════════════════════════════════════════════════════════════
📊 Titan-TPU V2 进度 [Phase X - 第 Y 周]
═══════════════════════════════════════════════════════════════════

[最新的进度条]

═══════════════════════════════════════════════════════════════════

---

## ✅ 本次完成

### 1. [任务1名称]
- 描述
- 涉及文件: `xxx.sv`
- 关键代码: (如有)

### 2. [任务2名称]
- 描述
- 涉及文件

---

## 📝 文件变更清单

| 文件 | 变更类型 | 说明 |
|------|----------|------|
| `pe.sv` | 修改 | 修复多驱动 bug |
| `tb_pe.sv` | 新建 | PE 测试 |

---

## 🐛 遗留问题

### 问题1: [标题]
- 描述:
- 错误信息: (如有)
- 尝试过的方案:

---

## 👉 下一步计划

1. **立即做**: [最优先的任务]
2. **接下来**: [后续任务]
3. **可选**: [可以延后的任务]

---

## 📚 学到的知识点

1. **[概念1]**: 简要说明
2. **[概念2]**: 简要说明

---

## 🎤 面试相关

### 可能被问到的问题:
- Q1: 
- Q2:

---

*此摘要可直接粘贴到新对话中使用*
```

---

## 4. 特定任务模板

### 4.1 学习模块原理

```markdown
## 📖 学习任务: [模块名称]

我需要学习 `[文件路径]` 的工作原理。

### 学习目标
1. 理解模块的功能
2. 理解每个端口的作用
3. 理解核心逻辑
4. 能向面试官解释

### 代码
```systemverilog
[粘贴代码或让 Claude 读取文件]
```

### 请提供
1. **功能概述**: 一句话说明模块功能
2. **端口说明**: 表格形式列出端口
3. **工作原理**: 用简单语言解释
4. **数据流图**: ASCII 图
5. **时序图**: 关键操作的时序
6. **面试问题**: 可能被问到的问题

请用中文详细讲解。
```

### 4.2 实现新模块

```markdown
## 🔧 实现任务: [模块名称]

### 需求描述
[详细描述模块功能]

### 接口要求
- 输入: [列出输入]
- 输出: [列出输出]
- 时钟/复位: [说明]

### 约束条件
- 可综合
- 同步设计
- [其他约束]

### 请提供
1. **设计文档**: 架构说明 + ASCII 图
2. **RTL 代码**: 完整可综合的代码
3. **Testbench**: 验证代码
4. **测试用例**: 覆盖场景说明
5. **Git 命令**: 提交命令
```

### 4.3 代码审查

```markdown
## 🔍 代码审查: [文件名]

请审查以下代码:

```systemverilog
[代码内容]
```

### 审查要点
1. 语法和编译
2. 可综合性
3. 时序设计
4. 代码风格
5. 潜在 Bug
6. 优化建议

### 输出格式
对每个问题给出:
- 行号
- 严重程度 (高/中/低)
- 问题描述
- 修复建议
```

---

## 5. Debug 专用模板

### 5.1 VCS 编译错误

```markdown
## 🐛 Debug: VCS 编译错误

### 错误信息
```
[粘贴完整的 VCS 错误信息]
```

### 相关代码
文件: `[文件路径]`
```systemverilog
[粘贴相关代码，或指出行号范围]
```

### 已尝试
- [列出你已经尝试过的方法]

### 请提供
1. 错误原因分析
2. 修复后的代码
3. 修复原理解释
4. 预防建议
5. Git commit 命令
```

### 5.2 仿真结果不对

```markdown
## 🐛 Debug: 仿真结果错误

### 问题描述
[描述预期结果和实际结果]

### 预期行为
```
[预期的输出或波形]
```

### 实际行为
```
[实际的输出或波形]
```

### 相关代码
RTL: `[文件]`
TB: `[文件]`

### 请提供
1. 问题定位
2. 根因分析
3. 修复方案
4. 验证方法
```

### 5.3 时序不满足

```markdown
## 🐛 Debug: 时序违例

### DC 报告
```
[粘贴时序报告]
```

### 关键路径
```
[描述关键路径]
```

### 请提供
1. 时序瓶颈分析
2. 优化方案
3. 代码修改建议
4. 约束调整建议
```

---

## 6. 设计评审模板

### 6.1 架构评审

```markdown
## 🏗️ 架构评审: [模块名称]

### 设计概述
[简要描述设计]

### 架构图
```
[ASCII 架构图]
```

### 接口定义
| 端口 | 方向 | 宽度 | 描述 |
|------|------|------|------|
|      |      |      |      |

### 评审要点
1. 架构合理性
2. 接口完整性
3. 可扩展性
4. 面试展示价值

### 请提供
1. 架构评价
2. 改进建议
3. 风险点
4. 面试可能问到的问题
```

### 6.2 完成度检查

```markdown
## ✅ 完成度检查: Phase [X]

### 检查清单

| 模块 | RTL | TB | 仿真 | 审查 | 文档 |
|------|-----|----|----|------|-----|
| PE   | ✅  | ✅ | ✅ | ✅   | ⬜  |
| SA   | 🔄  | ⬜ | ⬜ | ⬜   | ⬜  |

### 请评估
1. 当前完成度
2. 质量评价
3. 遗漏项
4. 进入下一阶段的建议
```

---

## 📌 模板使用检查清单

### 开新对话前
- [ ] 复制 `01_MASTER_INSTRUCTIONS.md` 到 Project Instructions
- [ ] 准备好最新的进度条
- [ ] 准备好本次目标
- [ ] 如有交接摘要，准备好

### 对话进行中
- [ ] 每次任务完成后更新进度
- [ ] 重要代码变更记录下来
- [ ] Bug 记录到 Debug Log

### 对话结束前
- [ ] 请求生成交接摘要
- [ ] 保存交接摘要
- [ ] 更新 `07_PROGRESS_TRACKER.md`

---

*文档版本: v1.0 | 更新时间: 2025-01-16*
